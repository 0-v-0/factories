<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Factories</title><link rel="icon" type="image/png" href="./icon.png">  <script type="module" src="./assets/game-DffMce7s.js"></script>
  <link rel="modulepreload" href="./assets/__uno-x_vZtz2U.js">
  <link rel="modulepreload" href="./assets/game-C6B8_-6p.js">
  <link rel="modulepreload" href="./assets/view-BbfiM190.js">
  <link rel="stylesheet" href="./assets/__uno-Bt_xnz-9.css">
  <link rel="stylesheet" href="./assets/game-BZHH_3DZ.css">
</head><body><game-menu class="drawer drawer-end" style="height:100vh"><div class="panel"><label class="btn" title="返回" @click="back">🔙</label><label class="btn btn-info" title="详情"><svg class="w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg><input type="checkbox" hidden c-model="showDetails"></label></div><tile-info class="bg-base-200" .selected="selectedSlot" c-show="showDetails"><details open><summary>图块信息</summary><summary c-show="selected<0">请在地图上选择一个图块</summary><div c-show="selected>=0"><dl><dt class="tooltip" data-tip="地形">⛰️</dt><dd>$terrain</dd><dt class="tooltip" data-tip="植被">🌲</dt><dd>$vegetation</dd><dt class="tooltip" data-tip="温度">🌡️</dt><dd>$temperature</dd><dt class="tooltip" data-tip="相对湿度">💧</dt><dd>$humidity</dd></dl><div class="form-control" c-show="!level"><button class="btn btn-info" @click="felling" .disabled="!logCount">砍树</button><button class="btn btn-neutral" @click="dig" .disabled="!canDig">挖掘</button><button class="btn btn-accent" @click="quarry" .disabled="!stoneCount">采石</button></div></div></details><div c-show="level"><details open><summary>🏭建筑信息</summary><dl><dt>建筑</dt><dd>$name</dd><dt>等级</dt><dd>$level</dd></dl><label class="l-label"><input type="checkbox" c-model="selectKind">选择同种建筑</label><label class="l-label"><input type="checkbox" c-model="selectOther">选择其他建筑</label><summary class="form-control justify-evenly"><button class="btn btn-primary" @click="upgrade">升级</button><button class="btn btn-warning" @click="downgrade" .disabled="level==1">降级</button><button class="btn btn-error" @click="destroy">拆除</button></summary></details></div><recipe-info .selected="selected"></recipe-info></tile-info><input class="drawer-toggle" type="checkbox" id="toggle"><div class="drawer-content"><div class="panel" style="right:0"><label class="btn btn-primary" for="toggle" title="打开侧边栏"><svg class="w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg></label></div><canvas @click="onClick" @mousemove="onMouseMove" @touchmove="onTouchMove"
			@touchstart="onTouchStart" @touchend="onTouchEnd"
			@mousedown="onMouseDown" @mouseup="onMouseUp" @wheel="onWheel"
			@mouseleave="onMouseUp" id="app"></canvas></div><div class="drawer-side" id="sidebar"><tab-container style="width:100%;overflow:auto;background:#f0f0f0;height:100vh;padding-top:1rem"><div class="text-lg" role="tablist"><div role="tab" id="detail-tab">仓库</div><div role="tab" id="option-tab">操作</div><div role="tab" aria-selected="true" id="more-tab">更多</div></div><div role="tabpanel" aria-labelledby="detail-tab" hidden><item-table col-keys="name,amount,delta,capacity"
				col-names=",物品,数量,变化量,剩余容量"
				.selected="selectedSlot"><div class="overflow-x-auto"><data-filter ref="filter"></data-filter><table class="table table-zebra table-select"><thead><tr><th><label><input type="checkbox" c-model="selectAll">全选</label></th><template c-for="col, k; columns"><th>$col</th></template></tr></thead><tbody><template c-for="item; items"><tr class="hover"><td><input type="checkbox" c-model="item.selected"></td><td>$item.name</td><td>$item.amount</td><td style="color:&#36;{getColor(item.amount,item.delta)}">$item.delta</td><td>$item.capacity</td></tr></template></tbody></table><c-pagination class="flex" ref="page"></c-pagination><div class="p-4"><div c-show="items.length"><label class="join">丢弃数量：<input class="join-item input input-bordered input-xs select-info" 
					type="number" c-model.lazy="dropCount" placeholder="丢弃数量"
					min="1"><button class="join-item btn btn-error btn-xs" 
					@click="dropByCount">按数量丢弃</button></label><label class="join">丢弃比例%：<input class="join-item input input-bordered input-xs select-info" 
					type="number" c-model.lazy="dropRate" min="1" max="100"><button class="join-item btn btn-error btn-xs" 
					@click="dropByRate">按比例丢弃</button></label></div><div class="join" c-show="!mode"><input class="join-item input input-bordered input-sm" 
				type="number" c-model.lazy="count"><button class="join-item btn btn-primary btn-sm" 
				@click="fill">批量设置数量</button></div></div></div></item-table></div><div role="tabpanel" aria-labelledby="option-tab" hidden><tab-container><div class="text-lg" role="tablist"><div role="tab" aria-selected="true" id="c-tab">建造</div><div role="tab" id="q-tab">任务队列</div><div role="tab" id="tech-tab">科技树</div></div><div role="tabpanel" aria-labelledby="c-tab"><building-table col-keys="name,cost,builtOn,time"
						col-names="图片,名称,每秒消耗,可建造地形,建造时间(s),操作"
						.selected="selectedSlot"><div class="overflow-x-auto"><div class="ml-4 text-info">点击建筑名称或图片以开始建造</div><label class="p-4"><input type="checkbox" c-model="hideUnavailable">隐藏不可建造建筑</label><data-filter ref="filter"></data-filter><table class="table table-xs table-zebra"><thead><tr><template c-for="col; columns"><th>&#36;{col}</th></template></tr></thead><tbody><template c-for="item; items"><tr class="hover"><td class="building-icon" @click="build(item)" style="background-position:&#36;{getBgPos(item)}"></td><td @click="build(item)">$item.name</td><td><div class="tooltip" data-tip="$item.cost">点击查看</div></td><td>&#36;{getBuiltOn(item.builtOn)}</td><td>$item.time</td></tr></template></tbody></table><c-pagination class="flex" ref="page"></c-pagination></div></building-table></div><div role="tabpanel" aria-labelledby="q-tab" hidden><q-table col-keys="name,coord,remainTime"
						col-names=",名称,坐标,剩余时间(s),操作"
						><div class="flex justify-evenly"><span>最大任务数：$maxTasks</span><span>点击任务名称可查看详情</span></div><div class="overflow-x-auto"><data-filter ref="filter"></data-filter><table class="table table-zebra table-select table-tip"><thead><tr><th><label><input type="checkbox" c-model="selectAll">全选</label></th><template c-for="col; columns"><th>$col</th></template></tr></thead><tbody><template c-for="item, i; items"><tr class="hover"><td><input type="checkbox" c-model="item.selected"></td><td><div class="tooltip" data-tip="$item.desc">$item.name</div></td><td>&#36;{toCoord(item.slot)}</td><td>$item.remainTime</td><td><div type="checkbox" c-model="item.selected"></div><label class="btn btn-primary btn-sm swap"><input type="checkbox" c-model="item.paused"><span class="swap-on">继续</span><span class="swap-off">暂停</span></label></td></tr></template></tbody></table><c-pagination class="flex" ref="page"></c-pagination><button class="btn btn-sm" @click="switch" c-show="selectedCount">开始/暂停选中任务</button><button class="btn btn-error btn-sm" @click="cancel" c-show="selectedCount">终止</button></div></q-table></div><div role="tabpanel" aria-labelledby="tech-tab" hidden><tech-tree col-keys="name,prereqs,operation"
						col-names="名称,前置条件,操作"
						><div class="overflow-x-auto"><data-filter ref="filter"></data-filter><table class="table table-zebra"><thead><tr><template c-for="col; columns"><th>&#36;{col}</th></template></tr></thead><tbody><template c-for="item; items"><tr class="hover"><td>$item.name</td><td>$item.prereqs</td><td><button class="btn btn-primary btn-sm" .disabled="!canUnlock(item)"
						@click="unlock(item)">&#36;{unlocked(item) ? '已解锁' : '解锁'}</button></td></tr></template></tbody></table><c-pagination class="flex" ref="page"></c-pagination></div></tech-tree></div></tab-container></div><div role="tabpanel" aria-labelledby="more-tab"><div class="text-red">测试版本，不代表最终品质</div><details class="ml-4" id="map-settings"><summary>显示设置</summary><label><input type="checkbox" c-model="camLock">锁定视图</label><label><input type="checkbox" c-model="showLevel">在地图上显示建筑等级</label><label><input type="checkbox" c-model="showProgress">在地图上显示生产进度</label><label><input type="checkbox" c-model="showExtra">显示叠加图块（桥梁，隧道）</label><label><input type="checkbox" c-model="showEff">在地图上高亮显示工厂的运行效率</label><button class="btn btn-neutral" @click="resetCam">重置视图</button></details><div class="p-8"><label class="label"><span class="label-text">自动保存周期(s)</span><input class="input input-bordered input-sm" type="number" c-model.lazy="autosave"></label><div class="label-text">为0时禁用自动保存</div><label><div class="label-text mt-4">游戏速度：$speed</div><input class="range range-sm" type="range" min="0" max="3" step="0.5" c-model.lazy="speed"></label><div class="label-text">为0时暂停游戏</div></div></div></tab-container></div></game-menu></body></html>