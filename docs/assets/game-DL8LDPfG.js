import{b as u,e as h}from"./__uno-DeMoJ9bO.js";const t=(a,n=-1)=>a?a.split(",").map(o=>{const[c,l]=o.split(/(\D+)/,2);return[E.get(l),n*+c]}):[],dt=(a,n=1)=>a.split(",").map(o=>{const[c,l]=o.split(/(\D+)/,2);return n*+c+l}).join();function pt(a){return z.filter(n=>{if(n.reqTechs){for(const o of n.reqTechs)if(!u.techs.has(o))return!1}return n.buildings.has(a)})}function e(a,n,o,c=1,l=""){return{id:A(o),name:a,period:c,deltas:o,buildings:n?new Set(n.split(",").map(f=>nt.find(g=>g.name==f).id)):new Set,reqTechs:l?new Set(l.split(",")):void 0}}const z=[],_=9,C=72,tt=81,O=64,et=O**2,y=["操作成功","建筑不存在","仓库数量达到上限","仓库不存在","队列已满","资源不足","库存已满","配方不存在","已暂停","生产中"],bt=["低地","高地","山地","山顶","沟谷","沙滩","浅水","深水","苔原","草地","湿地","针叶林","落叶阔叶林","常绿阔叶林","常绿硬叶林","雨林"],it=["石头","石灰石","原木","木板","水","冰","冷却液","黏土","高岭土","砖","瓷","沙子","盐","煤","硫","水晶矿","钻石","氢","金","铂","银","银矿石","铜","铜矿石","铁","铁矿石","铅","铅矿石","锌","锌矿石","钛矿石","钛","铀","贫铀","铀矿石","石墨","烃","含氧有机物","化肥","硫酸","硝酸","氨","纸","碱","纯碱","火药","烈性炸药","核燃料棒","碳素钢","硅钢","原油","液化天然气","混凝土","塑料","铝合金","钛合金","玻璃","玻璃纤维","硅","锗","稀土","橡胶","硅橡胶","电缆","电路板","晶圆","芯片","矿渣","固体废料","放射性废料","超导体","气凝胶"],E=new Map(it.map((a,n)=>[a,n])),nt=[{id:16,name:"公路",cost:"5石头",builtOn:3,time:2},{id:36,name:"窑",cost:"4石头",builtOn:3,time:2},{id:32,name:"仓库",cost:"6原木",builtOn:3,time:2},{id:38,name:"风车",cost:"5木板",builtOn:3,time:2},{id:35,name:"水车",cost:"6木板",builtOn:3,time:2},{id:34,name:"水池",cost:"6石头",builtOn:3,time:2},{id:33,name:"图书馆",cost:"10木板,10纸",builtOn:3,time:2},{id:67,name:"隧道",cost:"9混凝土",builtOn:12,time:2},{id:17,name:"铁路",cost:"12碳素钢,7石头,6木板",builtOn:3,time:2},{id:20,name:"铁路桥",cost:"10碳素钢,2石头,3木板,12混凝土",builtOn:15,time:2},{id:71,name:"铁路隧道",cost:"12碳素钢,3石头,4木板,10混凝土",builtOn:3,time:2},{id:68,name:"水库",cost:"10混凝土",builtOn:3,time:2},{id:69,name:"垃圾填埋场",cost:"9碳素钢",builtOn:3,time:2},{id:64,name:"储罐",cost:"10碳素钢",builtOn:3,time:2},{id:113,name:"石油钻塔",cost:"15碳素钢",builtOn:131,time:2},{id:21,name:"流体管道",cost:"9碳素钢",builtOn:15,time:2},{id:112,name:"加油站",cost:"8碳素钢,4混凝土",builtOn:3,time:2},{id:122,name:"物理实验室",cost:"",builtOn:3,time:2},{id:123,name:"化学实验室",cost:"",builtOn:3,time:2},{id:124,name:"生物实验室",cost:"",builtOn:3,time:2},{id:115,name:"蓄电池",cost:"2塑料,5铅,5硫酸,7水",builtOn:3,time:2},{id:120,name:"火电站",cost:"7碳素钢,10混凝土",builtOn:3,time:2},{id:114,name:"水电站",cost:"8碳素钢,12混凝土",builtOn:96,time:2},{id:119,name:"变电站",cost:"5硅钢,5碳素钢,8电缆",builtOn:3,time:2},{id:19,name:"桥",cost:"12混凝土",builtOn:15,time:2},{id:155,name:"地热电站",cost:"10混凝土,8水",builtOn:3,time:2},{id:144,name:"蓄能电站",cost:"8混凝土,6碳素钢",builtOn:3,time:2},{id:154,name:"潮汐电站",cost:"8混凝土,5碳素钢",builtOn:3,time:2},{id:153,name:"电缆塔",cost:"12电缆,5碳素钢,10橡胶",builtOn:3,time:2},{id:146,name:"太阳能电池板",cost:"8玻璃,8硅",builtOn:3,time:2},{id:150,name:"生物电站",cost:"12混凝土,9铝合金",builtOn:3,time:2},{id:151,name:"光热电站",cost:"15混凝土,7玻璃,10盐",builtOn:3,time:2},{id:152,name:"核物理实验室",cost:"",builtOn:3,time:2},{id:156,name:"核电站",cost:"12碳素钢,10混凝土,9铅",builtOn:3,time:2},{id:147,name:"重力储能装置",cost:"10石头,5碳素钢",builtOn:12,time:2},{id:39,name:"采石场",cost:"1原木",builtOn:12,time:2},{id:40,name:"采沙场",cost:"1石头",builtOn:32,time:2},{id:41,name:"伐木场",cost:"1石头",builtOn:3,time:2},{id:42,name:"木材厂",cost:"2石头",builtOn:3,time:2},{id:43,name:"造纸厂",cost:"3木板",builtOn:3,time:2},{id:44,name:"采矿场",cost:"2石头",builtOn:3,time:2},{id:45,name:"陶瓷厂",cost:"12石头",builtOn:3,time:2},{id:46,name:"砖厂",cost:"10石头",builtOn:3,time:2},{id:47,name:"回收厂",cost:"",builtOn:3,time:2},{id:72,name:"铸铁厂",cost:"14砖头",builtOn:3,time:2},{id:73,name:"钢铁厂",cost:"15砖头",builtOn:3,time:2},{id:74,name:"冶炼厂",cost:"14砖头",builtOn:3,time:2},{id:75,name:"合金厂",cost:"12砖头",builtOn:3,time:2},{id:76,name:"盐田",cost:"10砖头",builtOn:32,time:2},{id:77,name:"小作坊",cost:"12砖头",builtOn:3,time:2},{id:96,name:"玻璃厂",cost:"9碳素钢",builtOn:3,time:2},{id:97,name:"氨厂",cost:"9碳素钢",builtOn:3,time:2},{id:98,name:"纯碱厂",cost:"9碳素钢",builtOn:3,time:2},{id:99,name:"硫酸厂",cost:"12碳素钢,5玻璃",builtOn:3,time:2},{id:100,name:"硝酸厂",cost:"10碳素钢,4玻璃",builtOn:3,time:2},{id:101,name:"化工厂",cost:"12碳素钢,2玻璃",builtOn:3,time:2},{id:102,name:"炼油厂",cost:"15碳素钢,2玻璃",builtOn:3,time:2},{id:103,name:"精馏塔",cost:"10碳素钢",builtOn:3,time:2},{id:104,name:"化肥厂",cost:"12碳素钢,3玻璃",builtOn:3,time:2},{id:105,name:"橡胶厂",cost:"11碳素钢,2玻璃",builtOn:3,time:2},{id:106,name:"塑料厂",cost:"9碳素钢,2玻璃",builtOn:3,time:2},{id:107,name:"混凝土厂",cost:"12碳素钢",builtOn:3,time:2},{id:160,name:"电缆厂",cost:"8混凝土,2橡胶",builtOn:3,time:2},{id:161,name:"硅橡胶厂",cost:"9混凝土",builtOn:3,time:2},{id:166,name:"天然气发电厂",cost:"8混凝土",builtOn:3,time:2},{id:149,name:"垃圾焚烧发电厂",cost:"9混凝土",builtOn:3,time:2},{id:162,name:"冷却塔",cost:"12混凝土,8碳素钢",builtOn:3,time:2},{id:163,name:"制冰厂",cost:"6混凝土",builtOn:3,time:2},{id:164,name:"海水淡化厂",cost:"12混凝土,10碳素钢",builtOn:64,time:2}],Ot=[{name:"造纸术",prereqs:[],time:2},{name:"砖头制造",prereqs:[],time:2},{name:"陶瓷制造",prereqs:[],time:3},{name:"钢铁生产",prereqs:[],time:5},{name:"合金制造",prereqs:["钢铁生产"],time:5},{name:"合成氨",prereqs:["电解制氢"],time:2},{name:"侯氏制碱",prereqs:["合成氨"],time:5},{name:"化肥制造",prereqs:["合成氨"],time:5},{name:"玻璃制造",prereqs:["侯氏制碱"],time:5},{name:"石油开采",prereqs:[],time:5},{name:"塑料制造",prereqs:["石油开采"],time:5},{name:"橡胶制造",prereqs:["石油开采"],time:5},{name:"混凝土制造",prereqs:[],time:5},{name:"电缆制造",prereqs:["橡胶制造"],time:5},{name:"发电机",prereqs:["电缆制造"],time:5},{name:"变压器",prereqs:["电缆制造"],time:5},{name:"输电网",prereqs:["电缆制造"],time:5},{name:"生物发电",prereqs:[],time:5},{name:"铀浓缩",prereqs:[],time:5},{name:"核燃料棒制造",prereqs:["铀浓缩"],time:10}];function st(){z.push(e("木板制造","木材厂",[...t("2原木",-1),...t("1木板",1)],1,""),e("砍树","伐木场",[...t("1原木",1)],1,""),e("挖煤矿","采矿场",[...t("4煤、2高岭土、1石墨、1硫、1铁矿石、1钻石",1)],1,""),e("挖铜矿","采矿场",[...t("5铜矿石、2铁矿石、2锌矿石、1铅矿石、1银矿石",1)],1,""),e("挖铁矿","采矿场",[...t("5铁矿石、2钛矿石、2铜矿石、1银矿石",1)],1,""),e("挖共生矿","采矿场",[...t("2铅矿石、2锌矿石、2石墨、2钛矿石、1银矿石、1金、1铀矿石",1)],1,""),e("挖稀土矿","采矿场",[...t("4稀土、3高岭土、1铁矿石",1)],1,""),e("开采石油","石油钻塔",[...t("7原油、2液化天然气",1)],1,"石油开采"),e("火法炼铜","冶炼厂",[...t("10铜矿石、7煤",-1),...t("10铜、2硫、3矿渣、5固体废料",1)],1,""),e("制冰","海水淡化厂,制冰厂",[...t("2水",-1),...t("1冰",1)],1,""),e("制砖","砖厂",[...t("2黏土",-1),...t("1砖",1)],2,"砖头制造"),e("造纸","造纸厂",[...t("3原木",-1),...t("2纸",1)],1,"造纸术"),e("冷却液pro制造","炼油厂,精馏塔",[...t("8烃",-1),...t("7冷却液",1)],1,""),e("玻璃制造","玻璃厂",[...t("3沙子、1纯碱",-1),...t("1玻璃",1)],2,"玻璃制造"),e("制瓷","陶瓷厂",[...t("5高岭土",-1),...t("1瓷",1)],2,"陶瓷制造"),e("碳素钢制造","钢铁厂",[...t("3铁",-1),...t("1碳素钢",1)],1,"钢铁生产"),e("硅钢制造","钢铁厂",[...t("4铁、2硅",-1),...t("1硅钢",1)],1,"钢铁生产"),e("铝合金制造","合金厂",[...t("2高岭土、1铁",-1),...t("1铝合金",1)],2,"合金制造"),e("有机化工原料制造","炼油厂",[...t("2原油",-1),...t("1烃",1)],1,""),e("塑料制造","塑料厂",[...t("2烃",-1),...t("1塑料",1)],1,"塑料制造"),e("橡胶制造","橡胶厂",[...t("4烃",-1),...t("2橡胶",1)],1,"橡胶制造"),e("冷却液制造","炼油厂,精馏塔",[...t("5烃",-1),...t("4冷却液",1)],1,""),e("制硅","",[...t("3沙子",-1),...t("1硅",1)],1,""),e("晶圆制造","",[...t("2硅",-1),...t("1晶圆",1)],1,""),e("芯片制造","",[...t("1晶圆",-1),...t("1芯片",1)],1,""),e("贫铀制造","核物理实验室",[...t("2铀",-1),...t("1贫铀",1)],3,"铀浓缩"),e("核燃料棒制造","核物理实验室",[...t("10铀",-1),...t("1核燃料棒",1)],2,"核燃料棒制造"),e("盐制造","海水淡化厂",[...t("5水",-1),...t("2盐",1)],1,""),e("石灰石制造","化工厂",[...t("5石头、3煤",-1),...t("2石灰石",1)],1,""),e("采石","采石场",[...t("1石头",1)],1,""),e("采沙","采沙场",[...t("1沙子",1)],1,""),e("黏土获取","采矿场",[...t("3黏土",1)],1,""),e("炼钛","冶炼厂",[...t("3钛矿石、2硫酸",-1),...t("1钛、1矿渣",1)],1,""),e("炼铀","冶炼厂",[...t("5铀矿石、5煤",-1),...t("3铀、3固体废料",1)],1,""),e("钛合金制造","合金厂",[...t("3钛、1铁",-1),...t("2钛合金",1)],1,""),e("湿法炼铜","冶炼厂",[...t("5铁矿石、5铜矿石、1硫酸、3水",-1),...t("5铁、5铜、3固体废料",1)],1,""),e("炼铁","铸铁厂",[...t("4铁矿石、4煤",-1),...t("3铁、1矿渣、1固体废料",1)],1,""),e("高炉炼铁","铸铁厂",[...t("20铁矿石、20煤、4石灰石",-1),...t("20铁、3硫、15矿渣、8固体废料",1)],1,""),e("炼银","冶炼厂",[...t("3银矿石、1煤",-1),...t("2银、1硫、1固体废料",1)],1,""),e("炼锌","冶炼厂",[...t("4锌、4煤",-1),...t("4锌、1硫、2固体废料",1)],1,""),e("炼铅","冶炼厂",[...t("20铅、20煤",-1),...t("15铅、1铂、10固体废料",1)],1,""),e("氨水制化肥","化肥厂",[...t("1氨、1水",-1),...t("1化肥",1)],1,"化肥制造"),e("硫酸氢铵制化肥","化肥厂",[...t("1氨、1硫酸",-1),...t("1化肥",1)],1,"化肥制造"),e("硫酸铵制化肥","化肥厂",[...t("2氨、1硫酸",-1),...t("1化肥",1)],1,"化肥制造"),e("硝酸铵制化肥","化肥厂",[...t("1氨、1硝酸",-1),...t("2化肥",1)],1,"化肥制造"),e("硝酸钠制化肥","化肥厂",[...t("1纯碱、1硝酸",-1),...t("1化肥",1)],1,"化肥制造"),e("亚硝酸钠制化肥","化肥厂",[...t("1碱、1硝酸",-1),...t("1化肥",1)],1,"化肥制造"),e("侯氏制碱法","化肥厂,纯碱厂",[...t("2氨、2盐、7水",-1),...t("2纯碱、2化肥",1)],1,"侯氏制碱"),e("氨制造","氨厂",[...t("3氢",-1),...t("2氨",1)],1,"合成氨"),e("黑火药","小作坊",[...t("3煤、2硫",-1),...t("1火药",1)],1,""),e("TNT","小作坊",[...t("1烃、3硝酸",-1),...t("1烈性炸药",1)],1,""),e("制硫酸","硫酸厂",[...t("1硫、2水",-1),...t("1硫酸",1)],1,""),e("制硝酸","硝酸厂",[...t("2氨、5水",-1),...t("2硝酸",1)],1,""),e("裂解甲烷制氢","化工厂",[...t("1烃",-1),...t("2氢、1石墨",1)],1,""),e("水煤气法制氢","化工厂",[...t("1水、1煤",-1),...t("1氢",1)],1,""),e("电解制氢","化工厂",[...t("1水",-1),...t("1氢",1)],1,""),e("氯碱工业","化工厂",[...t("1水、2盐",-1),...t("1氢、2碱",1)],1,""),e("铜制电缆","电缆厂",[...t("3铜、1橡胶",-1),...t("2电缆",1)],1,"电缆制造"),e("银制电缆","电缆厂",[...t("1银、1橡胶",-1),...t("2电缆",1)],1,"电缆制造"))}const S=new Set;function ft(a,n){const o=new IntersectionObserver(([c])=>{c.isIntersecting?S.add(n):S.delete(n)});return o.observe(a),o}let G=64;const q=new Uint32Array(C);let U=-1;function at(a,n,o=-1){const c=j(E.get(a),n,o);c?h(c):o==-1&&n>0&&(u.stats.totalCollect+=n)}let j,mt,D,T,x,W,B,A,N,k,H,V,p,w;const rt=a=>T(a)[0]&7,X=a=>[a%O,a/O|0],ot="./factories.wasm";async function ct(a){let n;const{instance:o}=await WebAssembly.instantiateStreaming(fetch(ot),{env:{floor:Math.floor,sin:Math.sin,write(m,i){u.data.push(new Uint8Array(n,m,i).slice())}}}),{initGame:c,map:{value:l},constants:f,getStorage:g,storageType:v,addItem:I,addItemDelta:Y,nextProc:R,put:Z,setProc:F,save:J,tryApply:K,getRecipe:L,updateNet:Q,memory:$,updateTiles:M}=o.exports;n=$.buffer;{const{data:m}=u;let i=c(u.seed);for(p=new Uint8Array(n,l,et*4),ut(p);i;i=c(0)){const s=m.shift();s&&new Uint8Array(n,i,s.length).set(s)}}let P=R();H=J,B=M,V=L,M(0,O,G),w=new Uint8ClampedArray(n,f.value,256*8*3);const b=m=>{const i=g(m);if(!i)return null;const s=new Uint32Array(n,i,tt);return{coord:X(m),capacity:s.subarray(0,_),count:s.subarray(_)}};W=(m,i,s)=>{console.log("setProc",m,i,s);const r=F(m,i,s);r&&h(y[r])},D=(m,i)=>{let s=b(i);s||(s=b(i=-1)),i!=U&&(q.set(s.count),U=i);for(let r=0;r<C;r++)m[r].amount=s.count[r],m[r].delta=s.count[r]-q[r],m[r].capacity=s.capacity[v(r)];q.set(s.count)},j=(m,i,s=-1)=>{let r=I(m,i,s);return r==3&&(r=I(m,i,-1)),r?y[r]:""},k=(m,i,s=0)=>{let r=b(i);r||(r=b(i=-1));for(let d=0;d<m.length;d++)m[d].selected&&(r.count[d]=s<0?r.capacity[v(d)]:s)},A=m=>{for(const[s,r]of m)if(!Y(s,r))return-1;const i=P;return P=R(),i},N=K,T=m=>{const i=m*4;return p.subarray(i,i+4)},x=(m,i)=>{const s=Z(m,i);s?h(y[s]):a(1,"map",p)},a(2,"constants",w),st(),S.add(Q)}function ut(a){if(u.map){const n=u.mapSize**2;for(let o=0;o<n;o++)a[o*4+2]=u.map[o<<1],a[o*4+3]=u.map[o<<1|1]}u.map=a}const gt=Object.freeze(Object.defineProperty({__proto__:null,add:at,get addRecipe(){return A},get constants(){return w},get fill(){return k},get getRecipe(){return V},getTerrain:rt,get getTile(){return T},initGame:mt,loadWasm:ct,get map(){return p},mapHeight:G,get put(){return x},get save(){return H},get setProc(){return W},toCoord:X,get tryApply(){return N},get updateItems(){return D},get updateTiles(){return B}},Symbol.toStringTag,{value:"Module"}));export{B as A,O as B,G as C,gt as D,A as a,nt as b,ft as c,D as d,at as e,k as f,V as g,pt as h,T as i,rt as j,w as k,ct as l,p as m,it as n,et as o,t as p,dt as q,z as r,W as s,bt as t,S as u,Ot as v,N as w,y as x,x as y,X as z};
