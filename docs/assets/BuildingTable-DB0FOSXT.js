import{b as d,e as o,p as m,d as b}from"./__uno-B1MfMtFg.js";import{CTable as v}from"./CTable-DTKQdRkb.js";import{q as _}from"./QTable-BNSEf_qu.js";import{b as u,a as h,p as g,m as c,t as p}from"./game-Dc4kIq-d.js";import"./DataFilter-CFOyiOHr.js";import"./CPagination-DHKQ7_D7.js";import"./view-Cj0vNHUu.js";var f=Object.defineProperty,O=Object.getOwnPropertyDescriptor,P=Object.getPrototypeOf,C=Reflect.get,w=(e,r,t)=>r in e?f(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,x=(e,r,t,s)=>{for(var i=s>1?void 0:s?O(r,t):r,a=e.length-1,n;a>=0;a--)(n=e[a])&&(i=(s?n(r,t,i):n(i))||i);return s&&i&&f(r,t,i),i},$=(e,r,t)=>w(e,r+"",t),B=(e,r,t)=>C(P(e),t,r);let l=class extends v{selected=-1;hideUnavailable=!0;connectedCallback(){for(const e of u)e.recipeId=h(g(e.cost,-1));super.connectedCallback(),d(this,function(){return this.updateContents(this.page,this.filter)})}getBuiltOn(e){const r=[];for(let t=0;t<p.length;t++)e>>t&1&&r.push(p[t]);return r.join("/")}getBgPos({id:e}){return`-${(e&15)<<5}px -${e>>4<<5}px`}build(e){const r=this.selected;if(r<0){o("请先选择一个建筑位置");return}const t=c[r*4]&7;if(!(e.builtOn>>t&1)){o(`无法在${p[t]}上建造${e.name}`);return}if(c[r*4+3]&15){o("该位置已有建筑");return}_({name:"建造"+e.name,desc:"每秒消耗"+e.cost,slot:r,remainTime:e.time,recipeId:e.recipeId,value:e.id|256})}async updateContents(e,r){let t=u;if(this.hideUnavailable){const s=this.selected;if(s>=0){const i=1<<(c[s*4]&7);t=t.filter(a=>a.builtOn&i)}else t=[]}this.items=[...m(t,e,r)]}};$(l,"observedAttributes",B(l,l,"observedAttributes"));l=x([b("building-table")],l);export{l as BuildingTable};
