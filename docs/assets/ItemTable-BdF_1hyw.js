import{w as p,h,p as u,d as f}from"./__uno-B1MfMtFg.js";import{CTable as m}from"./CTable-DTKQdRkb.js";import{n as _,c as b,d as v,e as c,f as C}from"./game-Dc4kIq-d.js";import"./DataFilter-CFOyiOHr.js";import"./CPagination-DHKQ7_D7.js";var d=Object.defineProperty,g=Object.getOwnPropertyDescriptor,O=Object.getPrototypeOf,P=Reflect.get,w=(t,e,s)=>e in t?d(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,y=(t,e,s,i)=>{for(var r=i>1?void 0:i?g(e,s):e,o=t.length-1,l;o>=0;o--)(l=t[o])&&(r=(i?l(e,s,r):l(r))||r);return i&&r&&d(e,s,r),r},A=(t,e,s)=>w(t,e+"",s),D=(t,e,s)=>P(O(t),s,e);const n=t=>t.selected&&!t.name.includes("废料");let a=class extends m{list;selected=-1;count=999;dropCount=1;dropRate=100;mode=0;get selectAll(){return this.list.every(t=>t.selected)}set selectAll(t){this.list.forEach(e=>e.selected=t)}connectedCallback(){this.list=_.map(t=>({name:t,amount:0,delta:0,capacity:0})),this.mode=p.mode,super.connectedCallback(),this.filter.filters.push({key:"amount",op:2,value:"0",conj:0,valid:!0}),b(this,()=>this.updateContents(this.page,this.filter))}getColor(t,e){const s=2*Math.atan(6*Math.log((t+e)/t))/Math.PI;return"#"+h(s>0?[0,s,0]:[-s,0,0])}async updateContents(t,e){v(this.list,this.selected),this.items=[...u(this.list,t,e)]}dropByCount(){for(const t of this.items)n(t)&&c(t.name,-this.dropCount,this.selected)}dropByRate(){const t=this.dropRate/100;for(const e of this.items)n(e)&&c(e.name,-Math.ceil(e.amount*t),this.selected)}fill(){C(this.list,this.selected,this.count)}};A(a,"observedAttributes",D(a,a,"observedAttributes"));a=y([f("item-table")],a);export{a as ItemTable};
