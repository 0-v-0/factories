import{w as o,e as h}from"./__uno-B1MfMtFg.js";const e=(s,n=-1)=>s?s.split(",").map(d=>{const[r,u]=d.split(/(\D+)/,2);return[E.get(u),n*+r]}):[],ue=(s,n=1)=>s.split(",").map(d=>{const[r,u]=d.split(/(\D+)/,2);return n*+r+u}).join();function le(s){return z.filter(n=>{if(n.reqTechs){for(const d of n.reqTechs)if(!o.techs.has(d))return!1}return n.buildings.has(s)})}function t(s,n,d,r=1,u=""){return{id:T(d),name:s,period:r,deltas:d,buildings:n?new Set(n.split(",").map(f=>ne.find(g=>g.name==f).id)):new Set,reqTechs:u?new Set(u.split(",")):void 0}}const z=[],_=9,C=72,ee=81,O=64,te=O**2,y=["操作成功","建筑不存在","仓库数量达到上限","仓库不存在","队列已满","资源不足","库存已满","配方不存在","已暂停","生产中"],pe=["低地","高地","山地","山顶","沟谷","沙滩","浅水","深水","苔原","草地","湿地","针叶林","落叶阔叶林","常绿阔叶林","常绿硬叶林","雨林"],ie=["石头","石灰石","原木","木板","水","冰","冷却液","黏土","高岭土","砖","瓷","沙子","盐","煤","硫","水晶矿","钻石","氢","金","铂","银","银矿石","铜","铜矿石","铁","铁矿石","铅","铅矿石","锌","锌矿石","钛矿石","钛","铀","贫铀","铀矿石","石墨","烃","含氧有机物","化肥","硫酸","硝酸","氨","纸","碱","纯碱","火药","烈性炸药","核燃料棒","碳素钢","硅钢","原油","液化天然气","混凝土","塑料","铝合金","钛合金","玻璃","玻璃纤维","硅","锗","稀土","橡胶","硅橡胶","电缆","电路板","晶圆","芯片","矿渣","固体废料","放射性废料","超导体","气凝胶"],E=new Map(ie.map((s,n)=>[s,n])),ne=[{id:16,name:"公路",desc:"时代：原始",cost:"5石头",builtOn:3,time:2},{id:36,name:"窑",desc:"时代：原始",cost:"4石头",builtOn:3,time:2},{id:32,name:"仓库",desc:"时代：原始",cost:"6原木",builtOn:3,time:2},{id:38,name:"风车",desc:"时代：原始",cost:"5木板",builtOn:3,time:2},{id:35,name:"水车",desc:"时代：原始",cost:"6木板",builtOn:3,time:2},{id:34,name:"水池",desc:"时代：原始",cost:"6石头",builtOn:3,time:2},{id:33,name:"图书馆",desc:"时代：原始",cost:"10木板,10纸",builtOn:3,time:2},{id:67,name:"隧道",desc:"时代：金属",cost:"9混凝土",builtOn:12,time:2},{id:17,name:"铁路",desc:"时代：金属",cost:"12碳素钢,7石头,6木板",builtOn:3,time:2},{id:20,name:"铁路桥",desc:"时代：金属",cost:"10碳素钢,2石头,3木板,12混凝土",builtOn:15,time:2},{id:71,name:"铁路隧道",desc:"时代：金属",cost:"12碳素钢,3石头,4木板,10混凝土",builtOn:3,time:2},{id:68,name:"水库",desc:"时代：金属",cost:"10混凝土",builtOn:3,time:2},{id:69,name:"垃圾填埋场",desc:"时代：金属",cost:"9碳素钢",builtOn:3,time:2},{id:64,name:"储罐",desc:"时代：金属",cost:"10碳素钢",builtOn:3,time:2},{id:113,name:"石油钻塔",desc:"时代：化工",cost:"15碳素钢",builtOn:131,time:2},{id:21,name:"流体管道",desc:"时代：化工",cost:"9碳素钢",builtOn:15,time:2},{id:112,name:"加油站",desc:"时代：化工",cost:"8碳素钢,4混凝土",builtOn:3,time:2},{id:122,name:"物理实验室",desc:"时代：化工",cost:"",builtOn:3,time:2},{id:123,name:"化学实验室",desc:"时代：化工",cost:"",builtOn:3,time:2},{id:124,name:"生物实验室",desc:"时代：化工",cost:"",builtOn:3,time:2},{id:115,name:"蓄电池",desc:"时代：化工",cost:"2塑料,5铅,5硫酸,7水",builtOn:3,time:2},{id:120,name:"火电站",desc:"时代：化工",cost:"7碳素钢,10混凝土",builtOn:3,time:2},{id:114,name:"水电站",desc:"时代：化工",cost:"8碳素钢,12混凝土",builtOn:96,time:2},{id:119,name:"变电站",desc:"时代：化工",cost:"5硅钢,5碳素钢,8电缆",builtOn:3,time:2},{id:19,name:"桥",desc:"时代：电气",cost:"12混凝土",builtOn:15,time:2},{id:155,name:"地热电站",desc:"时代：电气",cost:"10混凝土,8水",builtOn:3,time:2},{id:144,name:"蓄能电站",desc:"时代：电气",cost:"8混凝土,6碳素钢",builtOn:3,time:2},{id:154,name:"潮汐电站",desc:"时代：电气",cost:"8混凝土,5碳素钢",builtOn:3,time:2},{id:153,name:"电缆塔",desc:"时代：电气",cost:"12电缆,5碳素钢,10橡胶",builtOn:3,time:2},{id:146,name:"太阳能电池板",desc:"时代：电气",cost:"8玻璃,8硅",builtOn:3,time:2},{id:150,name:"生物电站",desc:"时代：电气",cost:"12混凝土,9铝合金",builtOn:3,time:2},{id:151,name:"光热电站",desc:"时代：电气",cost:"15混凝土,7玻璃,10盐",builtOn:3,time:2},{id:152,name:"核物理实验室",desc:"时代：电气",cost:"",builtOn:3,time:2},{id:156,name:"核电站",desc:"时代：电气",cost:"12碳素钢,10混凝土,9铅",builtOn:3,time:2},{id:147,name:"重力储能装置",desc:"时代：电气",cost:"10石头,5碳素钢",builtOn:12,time:2},{id:39,name:"采石场",desc:"时代：原始",cost:"1原木",builtOn:12,time:2},{id:40,name:"采沙场",desc:"时代：原始",cost:"1石头",builtOn:32,time:2},{id:41,name:"伐木场",desc:"时代：原始",cost:"1石头",builtOn:3,time:2},{id:42,name:"木材厂",desc:"时代：原始",cost:"2石头",builtOn:3,time:2},{id:43,name:"造纸厂",desc:"时代：原始",cost:"3木板",builtOn:3,time:2},{id:44,name:"采矿场",desc:"时代：原始",cost:"2石头",builtOn:3,time:2},{id:45,name:"陶瓷厂",desc:"时代：原始",cost:"12石头",builtOn:3,time:2},{id:46,name:"砖厂",desc:"时代：原始",cost:"10石头",builtOn:3,time:2},{id:47,name:"回收厂",desc:"时代：原始",cost:"",builtOn:3,time:2},{id:72,name:"铸铁厂",desc:"时代：金属",cost:"14砖头",builtOn:3,time:2},{id:73,name:"钢铁厂",desc:"时代：金属",cost:"15砖头",builtOn:3,time:2},{id:74,name:"冶炼厂",desc:"时代：金属",cost:"14砖头",builtOn:3,time:2},{id:75,name:"合金厂",desc:"时代：金属",cost:"12砖头",builtOn:3,time:2},{id:76,name:"盐田",desc:"时代：金属",cost:"10砖头",builtOn:32,time:2},{id:77,name:"小作坊",desc:"时代：金属",cost:"12砖头",builtOn:3,time:2},{id:96,name:"玻璃厂",desc:"时代：化工",cost:"9碳素钢",builtOn:3,time:2},{id:97,name:"氨厂",desc:"时代：化工",cost:"9碳素钢",builtOn:3,time:2},{id:98,name:"纯碱厂",desc:"时代：化工",cost:"9碳素钢",builtOn:3,time:2},{id:99,name:"硫酸厂",desc:"时代：化工",cost:"12碳素钢,5玻璃",builtOn:3,time:2},{id:100,name:"硝酸厂",desc:"时代：化工",cost:"10碳素钢,4玻璃",builtOn:3,time:2},{id:101,name:"化工厂",desc:"时代：化工",cost:"12碳素钢,2玻璃",builtOn:3,time:2},{id:102,name:"炼油厂",desc:"时代：化工",cost:"15碳素钢,2玻璃",builtOn:3,time:2},{id:103,name:"精馏塔",desc:"时代：化工",cost:"10碳素钢",builtOn:3,time:2},{id:104,name:"化肥厂",desc:"时代：化工",cost:"12碳素钢,3玻璃",builtOn:3,time:2},{id:105,name:"橡胶厂",desc:"时代：化工",cost:"11碳素钢,2玻璃",builtOn:3,time:2},{id:106,name:"塑料厂",desc:"时代：化工",cost:"9碳素钢,2玻璃",builtOn:3,time:2},{id:107,name:"混凝土厂",desc:"时代：化工",cost:"12碳素钢",builtOn:3,time:2},{id:160,name:"电缆厂",desc:"时代：电气",cost:"8混凝土,2橡胶",builtOn:3,time:2},{id:161,name:"硅橡胶厂",desc:"时代：电气",cost:"9混凝土",builtOn:3,time:2},{id:166,name:"天然气发电厂",desc:"时代：电气",cost:"8混凝土",builtOn:3,time:2},{id:149,name:"垃圾焚烧发电厂",desc:"时代：电气",cost:"9混凝土",builtOn:3,time:2},{id:162,name:"冷却塔",desc:"时代：电气",cost:"12混凝土,8碳素钢",builtOn:3,time:2},{id:163,name:"制冰厂",desc:"时代：电气",cost:"6混凝土",builtOn:3,time:2},{id:164,name:"海水淡化厂",desc:"时代：电气",cost:"12混凝土,10碳素钢",builtOn:64,time:2}],be=[{name:"造纸术",prereqs:[],time:2},{name:"砖头制造",prereqs:[],time:2},{name:"陶瓷制造",prereqs:[],time:3},{name:"钢铁生产",prereqs:[],time:5},{name:"合金制造",prereqs:["钢铁生产"],time:5},{name:"合成氨",prereqs:["电解制氢"],time:2},{name:"侯氏制碱",prereqs:["合成氨"],time:5},{name:"化肥制造",prereqs:["合成氨"],time:5},{name:"玻璃制造",prereqs:["侯氏制碱"],time:5},{name:"石油开采",prereqs:[],time:5},{name:"塑料制造",prereqs:["石油开采"],time:5},{name:"橡胶制造",prereqs:["石油开采"],time:5},{name:"混凝土制造",prereqs:[],time:5},{name:"电缆制造",prereqs:["橡胶制造"],time:5},{name:"发电机",prereqs:["电缆制造"],time:5},{name:"变压器",prereqs:["电缆制造"],time:5},{name:"输电网",prereqs:["电缆制造"],time:5},{name:"生物发电",prereqs:[],time:5},{name:"铀浓缩",prereqs:[],time:5},{name:"核燃料棒制造",prereqs:["铀浓缩"],time:10}];function se(){z.push(t("木板制造","木材厂",[...e("2原木",-1),...e("1木板",1)],1,""),t("砍树","伐木场",[...e("1原木",1)],1,""),t("挖煤矿","采矿场",[...e("4煤、2高岭土、1石墨、1硫、1铁矿石、1钻石",1)],1,""),t("挖铜矿","采矿场",[...e("5铜矿石、2铁矿石、2锌矿石、1铅矿石、1银矿石",1)],1,""),t("挖铁矿","采矿场",[...e("5铁矿石、2钛矿石、2铜矿石、1银矿石",1)],1,""),t("挖共生矿","采矿场",[...e("2铅矿石、2锌矿石、2石墨、2钛矿石、1银矿石、1金、1铀矿石",1)],1,""),t("挖稀土矿","采矿场",[...e("4稀土、3高岭土、1铁矿石",1)],1,""),t("开采石油","石油钻塔",[...e("7原油、2液化天然气",1)],1,"石油开采"),t("火法炼铜","冶炼厂",[...e("10铜矿石、7煤",-1),...e("10铜、2硫、3矿渣、5固体废料",1)],1,""),t("制冰","海水淡化厂,制冰厂",[...e("2水",-1),...e("1冰",1)],1,""),t("制砖","砖厂",[...e("2黏土",-1),...e("1砖",1)],2,"砖头制造"),t("造纸","造纸厂",[...e("3原木",-1),...e("2纸",1)],1,"造纸术"),t("冷却液pro制造","炼油厂,精馏塔",[...e("8烃",-1),...e("7冷却液",1)],1,""),t("玻璃制造","玻璃厂",[...e("3沙子、1纯碱",-1),...e("1玻璃",1)],2,"玻璃制造"),t("制瓷","陶瓷厂",[...e("5高岭土",-1),...e("1瓷",1)],2,"陶瓷制造"),t("碳素钢制造","钢铁厂",[...e("3铁",-1),...e("1碳素钢",1)],1,"钢铁生产"),t("硅钢制造","钢铁厂",[...e("4铁、2硅",-1),...e("1硅钢",1)],1,"钢铁生产"),t("铝合金制造","合金厂",[...e("2高岭土、1铁",-1),...e("1铝合金",1)],2,"合金制造"),t("有机化工原料制造","炼油厂",[...e("2原油",-1),...e("1烃",1)],1,""),t("塑料制造","塑料厂",[...e("2烃",-1),...e("1塑料",1)],1,"塑料制造"),t("橡胶制造","橡胶厂",[...e("4烃",-1),...e("2橡胶",1)],1,"橡胶制造"),t("冷却液制造","炼油厂,精馏塔",[...e("5烃",-1),...e("4冷却液",1)],1,""),t("制硅","",[...e("3沙子",-1),...e("1硅",1)],1,""),t("晶圆制造","",[...e("2硅",-1),...e("1晶圆",1)],1,""),t("芯片制造","",[...e("1晶圆",-1),...e("1芯片",1)],1,""),t("贫铀制造","核物理实验室",[...e("2铀",-1),...e("1贫铀",1)],3,"铀浓缩"),t("核燃料棒制造","核物理实验室",[...e("10铀",-1),...e("1核燃料棒",1)],2,"核燃料棒制造"),t("盐制造","海水淡化厂",[...e("5水",-1),...e("2盐",1)],1,""),t("石灰石制造","化工厂",[...e("5石头、3煤",-1),...e("2石灰石",1)],1,""),t("采石","采石场",[...e("1石头",1)],1,""),t("采沙","采沙场",[...e("1沙子",1)],1,""),t("黏土获取","采矿场",[...e("3黏土",1)],1,""),t("炼钛","冶炼厂",[...e("3钛矿石、2硫酸",-1),...e("1钛、1矿渣",1)],1,""),t("炼铀","冶炼厂",[...e("5铀矿石、5煤",-1),...e("3铀、3固体废料",1)],1,""),t("钛合金制造","合金厂",[...e("3钛、1铁",-1),...e("2钛合金",1)],1,""),t("湿法炼铜","冶炼厂",[...e("5铁矿石、5铜矿石、1硫酸、3水",-1),...e("5铁、5铜、3固体废料",1)],1,""),t("炼铁","铸铁厂",[...e("4铁矿石、4煤",-1),...e("3铁、1矿渣、1固体废料",1)],1,""),t("高炉炼铁","铸铁厂",[...e("20铁矿石、20煤、4石灰石",-1),...e("20铁、3硫、15矿渣、8固体废料",1)],1,""),t("炼银","冶炼厂",[...e("3银矿石、1煤",-1),...e("2银、1硫、1固体废料",1)],1,""),t("炼锌","冶炼厂",[...e("4锌、4煤",-1),...e("4锌、1硫、2固体废料",1)],1,""),t("炼铅","冶炼厂",[...e("20铅、20煤",-1),...e("15铅、1铂、10固体废料",1)],1,""),t("氨水制化肥","化肥厂",[...e("1氨、1水",-1),...e("1化肥",1)],1,"化肥制造"),t("硫酸氢铵制化肥","化肥厂",[...e("1氨、1硫酸",-1),...e("1化肥",1)],1,"化肥制造"),t("硫酸铵制化肥","化肥厂",[...e("2氨、1硫酸",-1),...e("1化肥",1)],1,"化肥制造"),t("硝酸铵制化肥","化肥厂",[...e("1氨、1硝酸",-1),...e("2化肥",1)],1,"化肥制造"),t("硝酸钠制化肥","化肥厂",[...e("1纯碱、1硝酸",-1),...e("1化肥",1)],1,"化肥制造"),t("亚硝酸钠制化肥","化肥厂",[...e("1碱、1硝酸",-1),...e("1化肥",1)],1,"化肥制造"),t("侯氏制碱法","化肥厂,纯碱厂",[...e("2氨、2盐、7水",-1),...e("2纯碱、2化肥",1)],1,"侯氏制碱"),t("氨制造","氨厂",[...e("3氢",-1),...e("2氨",1)],1,"合成氨"),t("黑火药","小作坊",[...e("3煤、2硫",-1),...e("1火药",1)],1,""),t("TNT","小作坊",[...e("1烃、3硝酸",-1),...e("1烈性炸药",1)],1,""),t("制硫酸","硫酸厂",[...e("1硫、2水",-1),...e("1硫酸",1)],1,""),t("制硝酸","硝酸厂",[...e("2氨、5水",-1),...e("2硝酸",1)],1,""),t("裂解甲烷制氢","化工厂",[...e("1烃",-1),...e("2氢、1石墨",1)],1,""),t("水煤气法制氢","化工厂",[...e("1水、1煤",-1),...e("1氢",1)],1,""),t("电解制氢","化工厂",[...e("1水",-1),...e("1氢",1)],1,""),t("氯碱工业","化工厂",[...e("1水、2盐",-1),...e("1氢、2碱",1)],1,""),t("铜制电缆","电缆厂",[...e("3铜、1橡胶",-1),...e("2电缆",1)],1,"电缆制造"),t("银制电缆","电缆厂",[...e("1银、1橡胶",-1),...e("2电缆",1)],1,"电缆制造"))}const w=new Set;function Oe(s,n){const d=new IntersectionObserver(([r])=>{r.isIntersecting?w.add(n):w.delete(n)});return d.observe(s),d}let j=64;const q=new Uint32Array(C);let U=-1;function ce(s,n,d=-1){const r=D(E.get(s),n,d);r?h(r):d==-1&&n>0&&(o.stats.totalCollect+=n)}let D,G,A,W,x,B,T,N,k,H,V,l,S;const ae=s=>A(s)[0]&7,X=s=>[s%O,s/O|0],me="./factories.wasm";async function de(s){let n;const{instance:d}=await WebAssembly.instantiateStreaming(fetch(me),{env:{floor:Math.floor,sin:Math.sin,write(c,i){o.data.push(new Uint8Array(n,c,i).slice())}}}),{initGame:r,map:{value:u},constants:f,getStorage:g,storageType:v,addItem:I,addItemDelta:Y,nextProc:R,put:Z,setProc:F,save:J,tryApply:K,getRecipe:L,updateNet:Q,memory:$,updateTiles:M}=d.exports;n=$.buffer;{const{data:c}=o;let i=r(o.seed);for(l=new Uint8Array(n,u,te*4),re(l);i;i=r(0)){const a=c.shift();a&&new Uint8Array(n,i,a.length).set(a)}}let P=R();H=J,B=M,V=L,M(0,O,j),S=new Uint8ClampedArray(n,f.value,256*8*3);const b=c=>{const i=g(c);if(!i)return null;const a=new Uint32Array(n,i,ee);return{coord:X(c),capacity:a.subarray(0,_),count:a.subarray(_)}};x=(c,i,a)=>{console.log("setProc",c,i,a);const m=F(c,i,a);m&&h(y[m])},G=(c,i)=>{let a=b(i);a||(a=b(i=-1)),i!=U&&(q.set(a.count),U=i);for(let m=0;m<C;m++)c[m].amount=a.count[m],c[m].delta=a.count[m]-q[m],c[m].capacity=a.capacity[v(m)];q.set(a.count)},D=(c,i,a=-1)=>{let m=I(c,i,a);return m==3&&(m=I(c,i,-1)),m?y[m]:""},k=(c,i,a=0)=>{let m=b(i);m||(m=b(i=-1));for(let p=0;p<c.length;p++)c[p].selected&&(m.count[p]=a<0?m.capacity[v(p)]:a)},T=c=>{for(const[a,m]of c)if(!Y(a,m))return-1;const i=P;return P=R(),i},N=K,A=c=>{const i=c*4;return l.subarray(i,i+4)},W=(c,i)=>{const a=Z(c,i);a?h(y[a]):s(1,"map",l)},s(2,"constants",S),se(),w.add(c=>{Q(c),s(1,"map",l)})}function re(s){if(o.map){const n=o.mapSize**2;for(let d=0;d<n;d++)s[d*4+2]=o.map[d<<1],s[d*4+3]=o.map[d<<1|1]}o.map=s}const fe=Object.freeze(Object.defineProperty({__proto__:null,add:ce,get addRecipe(){return T},get constants(){return S},get fill(){return k},get getRecipe(){return V},getTerrain:ae,get getTile(){return A},loadWasm:de,get map(){return l},mapHeight:j,get put(){return W},get save(){return H},get setProc(){return x},toCoord:X,get tryApply(){return N},get updateItems(){return G},get updateTiles(){return B}},Symbol.toStringTag,{value:"Module"}));export{B as A,O as B,j as C,fe as D,T as a,ne as b,Oe as c,G as d,ce as e,k as f,V as g,le as h,A as i,ae as j,S as k,de as l,l as m,ie as n,te as o,e as p,ue as q,z as r,x as s,pe as t,w as u,be as v,W as w,N as x,y,X as z};
