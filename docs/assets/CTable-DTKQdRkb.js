import{d as p,C as u,b as n,e as c}from"./__uno-B1MfMtFg.js";import"./DataFilter-CFOyiOHr.js";import"./CPagination-DHKQ7_D7.js";var f=Object.defineProperty,h=Object.getOwnPropertyDescriptor,d=(t,e,s)=>e in t?f(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,b=(t,e,s,i)=>{for(var r=i>1?void 0:i?h(e,s):e,l=t.length-1,a;l>=0;l--)(a=t[l])&&(r=(i?a(e,s,r):a(r))||r);return i&&r&&f(e,s,r),r},m=(t,e,s)=>d(t,e+"",s);const C=new Set(["","图片","操作"]);let o=class extends u{items=[];page;filter;keys;columns;get sortDir(){const t=this.filter?.sortKeys.find(({index:e})=>e==this.k)?.dir;return t?t==5?" 随机":t&1?"↑":"↓":""}k;connectedCallback(){super.connectedCallback();let t;if(!this.filter)return;const e=this;e.filter.keys=e.keys,e.filter.columns=e.columns.filter(s=>!C.has(s)),n(this.filter,function(){t?e.updateContents(e.page,t).catch(c):t=this}),n(this.filter,function(){this.sortKeys&&e.updateValue("filter")}),n(this.page,function(){e.updateContents(this,t).catch(c)})}attributeChangedCallback(t,e,s){t=="col-keys"&&(this.keys=s.split(",")),t=="col-names"&&(this.columns=s.split(",")),t=="per-pages"&&queueMicrotask(()=>this.page.perPages=s.split(",").map(i=>parseInt(i)))}sortBy(t){if(this.filter){const{sortKeys:e}=this.filter,s=e.findIndex(({index:i})=>i==t);e[s]?.dir?e[s].dir==2?e.splice(s,1):e[s].dir=2:e.push({index:t,dir:1})}}async updateContents(t,e){}};m(o,"observedAttributes",["col-keys","col-names","per-pages"]);o=b([p("c-table")],o);export{o as CTable};
